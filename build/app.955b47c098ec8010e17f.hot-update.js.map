{"version":3,"sources":["webpack:///./src/app/components/pages/message/MessagePage.tsx"],"names":[],"mappings":"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","file":"app.955b47c098ec8010e17f.hot-update.js","sourcesContent":["import axios from \"axios\";\r\nimport { Box, Card, CardBody, CardFooter, Form, Grommet, Heading, TextArea } from \"grommet\";\r\nimport React from \"react\";\r\nimport { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport { menuConfig } from \"../../../../shared/constants/menuItems\";\r\nimport container from \"../../../inversify/inversifyContainer\";\r\nimport { SERVICE_IDENTIFIER } from \"../../../inversify/inversifyTypes\";\r\nimport { IRootState } from \"../../../reduxInfrastructure/RootState\";\r\nimport { AuthService } from \"../../../services/authService\";\r\nimport { IBaseFormProps } from \"../../../types/form/IBaseFormProps\";\r\nimport { TopicMessageDto } from \"../../../types/models/TopicMessageDto\";\r\nimport MenuCompnent from \"../../menu/Menu\";\r\nimport { MessageActions } from \"./MessageActions\";\r\nimport { MessageComponent } from \"./MessageComponent\";\r\nimport { MESSAGE } from \"./MessageConstants\";\r\nimport { IMessageState } from \"./MessageState\";\r\n\r\nconst theme = {\r\n  global: {\r\n    font: {\r\n      family: 'Prosto One',\r\n    },\r\n    focus: {\r\n      border: {\r\n        color: \"#E9FFE1\"\r\n      }\r\n    },\r\n    control: {\r\n      border: {\r\n        radius: \"20px\"\r\n      }\r\n    }\r\n  },\r\n  card: {\r\n    container: {\r\n      background: '#1a3a39',\r\n      elevation: 'none',\r\n    },\r\n    footer: {\r\n      pad: { horizontal: 'medium', vertical: 'small' },\r\n    },\r\n  },\r\n  heading: {\r\n    color: '#ADFF0037',\r\n    level: {\r\n      2: {\r\n        medium: {\r\n          size: \"30px\",\r\n          height: \"40px\",\r\n        }\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\ntype IFormState = TopicMessageDto[];\r\ntype IMessageProps = IBaseFormProps<IFormState, {}>;\r\n\r\nclass messagePage extends Component<IMessageProps>  {\r\n  protected readonly actions: MessageActions;\r\n  private readonly _authService: AuthService = container.get<AuthService>(SERVICE_IDENTIFIER.AuthService);\r\n\r\n  public constructor(props: IMessageProps) {\r\n    super(props);\r\n    this.actions = container.get<MessageActions>(SERVICE_IDENTIFIER.MessageAction);\r\n    props.dispatch(this.actions.initForm());\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch({ type: MESSAGE });\r\n    this.getMessage()\r\n  }\r\n\r\n  getMessage() {\r\n    // @ts-ignore\r\n    axios.get(`http://185.209.31.106:55558/topic/${this.props.match.params.id}`, { headers: { Authorization: `Bearer ${this._authService.getAuthToken()}` } },)\r\n      .then(result => this.props.dispatch(this.actions.setMessage(result.data.topic.topicMessageInfos)))\r\n  }\r\n\r\n  deleteMessage(topicMessageId: number) {\r\n    // @ts-ignore\r\n    axios.delete(`http://185.209.31.106:55558/message/${topicMessageId}/delete`, { headers: { Authorization: `Bearer ${this._authService.getAuthToken()}` } },)\r\n      .then(result => this.getMessage())\r\n  }\r\n\r\n  editMessage(topicMessageId: number, title: string) {\r\n    // @ts-ignore\r\n    axios.put(`http://185.209.31.106:55558/message/${topicMessageId}/title/edit`, { title: title }, { headers: { Authorization: `Bearer ${this._authService.getAuthToken()}` } },)\r\n      .then(result => this.getMessage())\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    document.body.className = \"\";\r\n\r\n    return (<div>\r\n      <MenuCompnent items={menuConfig} />\r\n      <Grommet theme={theme}>\r\n        <Box\r\n          margin=\"xlarge\"\r\n          pad=\"medium\"\r\n          alignSelf='center'\r\n          alignContent=\"center\"\r\n          align=\"center\"\r\n        >\r\n          <Card elevation=\"large\" width=\"large\">\r\n            <CardBody height=\"small\">\r\n              <Heading level=\"2\" alignSelf=\"center\">\r\n                Сообщения темы\r\n              </Heading>\r\n              {this.props.form.record.map(element => (\r\n                <MessageComponent\r\n                  id={element.topicMessageId}\r\n                  title={element.title}\r\n                  createdAt={element.createdAt}\r\n                  authorUserName={element.authorUserName}\r\n                  deleteMessage={() => this.deleteMessage(element.topicMessageId)}\r\n                  editMessage={(newTitle: string) => this.editMessage(element.topicMessageId, newTitle)}\r\n                ></MessageComponent>\r\n              ))}\r\n            </CardBody>\r\n            <CardFooter>\r\n              <Form onSubmit={() => console.log(this.state)}>\r\n                <TextArea placeholder=\"Новое сообщение\" /*onChange={(event) => { this.setState({ newMessage: event.target.value }); console.log(this.state) }}*/>\r\n                </TextArea>\r\n              </Form>\r\n            </CardFooter>\r\n          </Card>\r\n        </Box>\r\n      </Grommet>\r\n    </div>)\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state: IRootState): IMessageState {\r\n  return { ...state.message }\r\n}\r\n\r\nexport const MessagePage = connect(mapStateToProps)(messagePage);\r\n\r\nexport default MessagePage;"],"sourceRoot":""}